
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Practical patterns and drills for high-quality Python development with geospatial data">
      
      
      
      
        <link rel="prev" href="../day04_testing/">
      
      
        <link rel="next" href="../day06_perf/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>Overview - Python Geospatial Engineering Practices</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="red">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#day-05-data" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Python Geospatial Engineering Practices" class="md-header__button md-logo" aria-label="Python Geospatial Engineering Practices" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Python Geospatial Engineering Practices
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Overview
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="red"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="red"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../study_plan/" class="md-tabs__link">
          
  
  
  Overview

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../day01_concurrency/" class="md-tabs__link">
          
  
  
  Training Modules

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Python Geospatial Engineering Practices" class="md-nav__button md-logo" aria-label="Python Geospatial Engineering Practices" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Python Geospatial Engineering Practices
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Overview
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../study_plan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Study Plan
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Training Modules
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Training Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Day 01 - Concurrency
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Day 01 - Concurrency
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../day01_concurrency/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Day 02 - Oop
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Day 02 - Oop
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../day02_oop/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Day 03 - Api
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Day 03 - Api
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../day03_api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Day 04 - Testing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Day 04 - Testing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../day04_testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" checked>
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Day 05 - Data
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Day 05 - Data
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#graduate-level-learning-objectives" class="md-nav__link">
    <span class="md-ellipsis">
      Graduate-Level Learning Objectives
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#theoretical-foundation" class="md-nav__link">
    <span class="md-ellipsis">
      Theoretical Foundation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Theoretical Foundation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#geospatial-data-complexity" class="md-nav__link">
    <span class="md-ellipsis">
      Geospatial Data Complexity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-serialization-for-geospatial-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Data Serialization for Geospatial Systems
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spatial-indexing-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      Spatial Indexing Algorithms
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code-architecture-and-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Code Architecture and Implementation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Code Architecture and Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#protocol-buffers-for-geospatial-data" class="md-nav__link">
    <span class="md-ellipsis">
      Protocol Buffers for Geospatial Data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-spatial-indexing-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Spatial Indexing Implementation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-optimization-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Optimization Patterns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-benchmarking-framework" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Benchmarking Framework
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance Benchmarking Framework">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#serialization-performance-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Serialization Performance Analysis
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#real-world-integration-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Real-World Integration Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Real-World Integration Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#postgis-integration-with-streaming" class="md-nav__link">
    <span class="md-ellipsis">
      PostGIS Integration with Streaming
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#professional-development-exercises" class="md-nav__link">
    <span class="md-ellipsis">
      Professional Development Exercises
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Professional Development Exercises">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-1-build-a-multi-format-data-converter" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 1: Build a Multi-Format Data Converter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-2-implement-advanced-spatial-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 2: Implement Advanced Spatial Operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-3-create-a-real-time-geospatial-stream-processor" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 3: Create a Real-Time Geospatial Stream Processor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-4-build-a-distributed-spatial-index" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 4: Build a Distributed Spatial Index
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#industry-context-and-applications" class="md-nav__link">
    <span class="md-ellipsis">
      Industry Context and Applications
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Industry Context and Applications">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#production-mapping-services" class="md-nav__link">
    <span class="md-ellipsis">
      Production Mapping Services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#location-intelligence-platforms" class="md-nav__link">
    <span class="md-ellipsis">
      Location Intelligence Platforms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#autonomous-vehicle-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Autonomous Vehicle Systems
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    <span class="md-ellipsis">
      Resources
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Resources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#technical-standards-and-specifications" class="md-nav__link">
    <span class="md-ellipsis">
      Technical Standards and Specifications
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spatial-algorithms-and-data-structures" class="md-nav__link">
    <span class="md-ellipsis">
      Spatial Algorithms and Data Structures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-optimization" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Optimization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#industry-applications" class="md-nav__link">
    <span class="md-ellipsis">
      Industry Applications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Day 06 - Perf
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            Day 06 - Perf
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../day06_perf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Day 07 - Mock
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            Day 07 - Mock
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../day07_mock/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#graduate-level-learning-objectives" class="md-nav__link">
    <span class="md-ellipsis">
      Graduate-Level Learning Objectives
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#theoretical-foundation" class="md-nav__link">
    <span class="md-ellipsis">
      Theoretical Foundation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Theoretical Foundation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#geospatial-data-complexity" class="md-nav__link">
    <span class="md-ellipsis">
      Geospatial Data Complexity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-serialization-for-geospatial-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Data Serialization for Geospatial Systems
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spatial-indexing-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      Spatial Indexing Algorithms
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#code-architecture-and-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Code Architecture and Implementation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Code Architecture and Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#protocol-buffers-for-geospatial-data" class="md-nav__link">
    <span class="md-ellipsis">
      Protocol Buffers for Geospatial Data
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#advanced-spatial-indexing-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Spatial Indexing Implementation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-optimization-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Optimization Patterns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#performance-benchmarking-framework" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Benchmarking Framework
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Performance Benchmarking Framework">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#serialization-performance-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Serialization Performance Analysis
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#real-world-integration-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Real-World Integration Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Real-World Integration Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#postgis-integration-with-streaming" class="md-nav__link">
    <span class="md-ellipsis">
      PostGIS Integration with Streaming
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#professional-development-exercises" class="md-nav__link">
    <span class="md-ellipsis">
      Professional Development Exercises
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Professional Development Exercises">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exercise-1-build-a-multi-format-data-converter" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 1: Build a Multi-Format Data Converter
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-2-implement-advanced-spatial-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 2: Implement Advanced Spatial Operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-3-create-a-real-time-geospatial-stream-processor" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 3: Create a Real-Time Geospatial Stream Processor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exercise-4-build-a-distributed-spatial-index" class="md-nav__link">
    <span class="md-ellipsis">
      Exercise 4: Build a Distributed Spatial Index
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#industry-context-and-applications" class="md-nav__link">
    <span class="md-ellipsis">
      Industry Context and Applications
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Industry Context and Applications">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#production-mapping-services" class="md-nav__link">
    <span class="md-ellipsis">
      Production Mapping Services
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#location-intelligence-platforms" class="md-nav__link">
    <span class="md-ellipsis">
      Location Intelligence Platforms
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#autonomous-vehicle-systems" class="md-nav__link">
    <span class="md-ellipsis">
      Autonomous Vehicle Systems
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    <span class="md-ellipsis">
      Resources
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Resources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#technical-standards-and-specifications" class="md-nav__link">
    <span class="md-ellipsis">
      Technical Standards and Specifications
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spatial-algorithms-and-data-structures" class="md-nav__link">
    <span class="md-ellipsis">
      Spatial Algorithms and Data Structures
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-optimization" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Optimization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#industry-applications" class="md-nav__link">
    <span class="md-ellipsis">
      Industry Applications
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="day-05-data">Day 05 - Data</h1>
<h2 id="graduate-level-learning-objectives">Graduate-Level Learning Objectives</h2>
<p>This module covers the sophisticated data processing techniques essential for enterprise geospatial systems, focusing on performance optimization, data serialization, and spatial indexing strategies used in production mapping and location intelligence platforms. By the end of this module, you will understand:</p>
<ul>
<li><strong>Binary serialization formats</strong> including Protocol Buffers, FlatBuffers, and Avro for high-performance geospatial data exchange</li>
<li><strong>Coordinate reference systems (CRS)</strong> and transformation algorithms for global interoperability</li>
<li><strong>Spatial indexing algorithms</strong> including R-tree, Quadtree, H3, and S2 for efficient spatial queries</li>
<li><strong>Computational geometry algorithms</strong> for spatial operations, topology validation, and geometric transformations</li>
<li><strong>Stream processing patterns</strong> for real-time geospatial data pipelines and change detection</li>
<li><strong>Memory optimization techniques</strong> for processing large-scale geospatial datasets</li>
<li><strong>Data compression and encoding</strong> strategies for geospatial storage and transmission</li>
</ul>
<h2 id="theoretical-foundation">Theoretical Foundation</h2>
<h3 id="geospatial-data-complexity">Geospatial Data Complexity</h3>
<p><strong>Geometric Primitives and Topology:</strong>
Modern geospatial systems must handle complex geometric relationships:
- <strong>Simple features</strong>: Points, LineStrings, Polygons with well-defined topology
- <strong>Complex geometries</strong>: MultiPolygons, GeometryCollections with potential self-intersections
- <strong>3D and temporal geometries</strong>: Z-coordinates, time-series spatial data, 4D spatiotemporal objects
- <strong>Topology preservation</strong>: Ensuring geometric validity through transformations and operations</p>
<p><strong>Scale and Precision Challenges:</strong>
- <strong>Multi-scale representation</strong>: From millimeter precision to global datasets
- <strong>Floating-point arithmetic</strong>: Precision loss and numerical stability in coordinate transformations
- <strong>Datum transformations</strong>: Accurate conversion between different geodetic reference systems
- <strong>Coordinate order conventions</strong>: lon/lat vs lat/lon and their implications for data integrity</p>
<h3 id="data-serialization-for-geospatial-systems">Data Serialization for Geospatial Systems</h3>
<p><strong>Protocol Buffers vs Traditional Formats:</strong></p>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Protocol Buffers</th>
<th>GeoJSON</th>
<th>Shapefile</th>
<th>PostGIS Binary</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Size</strong></td>
<td>60-80% smaller</td>
<td>Baseline</td>
<td>40% smaller</td>
<td>70% smaller</td>
</tr>
<tr>
<td><strong>Parse Speed</strong></td>
<td>3-10x faster</td>
<td>Baseline</td>
<td>2x faster</td>
<td>5x faster</td>
</tr>
<tr>
<td><strong>Schema Evolution</strong></td>
<td>Excellent</td>
<td>None</td>
<td>Limited</td>
<td>Good</td>
</tr>
<tr>
<td><strong>Language Support</strong></td>
<td>Excellent</td>
<td>Universal</td>
<td>Limited</td>
<td>Limited</td>
</tr>
<tr>
<td><strong>Human Readable</strong></td>
<td>No</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
</tr>
</tbody>
</table>
<p><strong>When to Choose Each Format:</strong>
- <strong>Protocol Buffers</strong>: High-volume APIs, microservices communication, performance-critical applications
- <strong>GeoJSON</strong>: Web applications, simple integrations, debugging and visualization
- <strong>Shapefile</strong>: Legacy system integration, GIS software compatibility
- <strong>PostGIS Binary</strong>: Database storage, spatial analysis, complex geometric operations</p>
<h3 id="spatial-indexing-algorithms">Spatial Indexing Algorithms</h3>
<p><strong>R-tree Family:</strong>
- <strong>R-tree</strong>: Bounding box hierarchies for 2D spatial data
- <strong>R*-tree</strong>: Optimized node splitting for better query performance<br />
- <strong>R+-tree</strong>: Non-overlapping rectangles for reduced false positives
- <strong>Hilbert R-tree</strong>: Space-filling curves for improved clustering</p>
<p><strong>Grid-Based Indexing:</strong>
- <strong>Quadtree</strong>: Recursive spatial subdivision for adaptive resolution
- <strong>Geohash</strong>: Base-32 encoding of geographic coordinates
- <strong>H3</strong>: Uber's hexagonal hierarchical spatial index
- <strong>S2</strong>: Google's spherical geometry library for global indexing</p>
<p><strong>Performance Characteristics:</strong></p>
<table>
<thead>
<tr>
<th>Index Type</th>
<th>Insert O()</th>
<th>Query O()</th>
<th>Memory</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr>
<td>R-tree</td>
<td>O(log n)</td>
<td>O(log n + k)</td>
<td>High</td>
<td>Complex geometries</td>
</tr>
<tr>
<td>Quadtree</td>
<td>O(log n)</td>
<td>O(log n + k)</td>
<td>Medium</td>
<td>Point data</td>
</tr>
<tr>
<td>Geohash</td>
<td>O(1)</td>
<td>O(k)</td>
<td>Low</td>
<td>Web applications</td>
</tr>
<tr>
<td>H3</td>
<td>O(1)</td>
<td>O(k)</td>
<td>Low</td>
<td>Uber-scale analytics</td>
</tr>
<tr>
<td>S2</td>
<td>O(1)</td>
<td>O(k)</td>
<td>Low</td>
<td>Global applications</td>
</tr>
</tbody>
</table>
<h2 id="code-architecture-and-implementation">Code Architecture and Implementation</h2>
<h3 id="protocol-buffers-for-geospatial-data">Protocol Buffers for Geospatial Data</h3>
<div class="highlight"><pre><span></span><code><span class="c1">// src/day05_data/protobuf/road_segment.proto</span>
<span class="k">syntax</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;proto3&quot;</span><span class="p">;</span>

<span class="kn">package</span><span class="w"> </span><span class="nn">geospatial</span><span class="o">.</span><span class="n">roads</span><span class="p">;</span>

<span class="c1">// Coordinate system information</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">CoordinateReferenceSystem</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">int32</span><span class="w"> </span><span class="na">epsg_code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="na">wkt_definition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="na">authority</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// High-precision coordinate with optional elevation and time</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">Coordinate</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="na">longitude</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">  </span><span class="kt">double</span><span class="w"> </span><span class="na">latitude</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">  </span><span class="k">optional</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="na">elevation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">  </span><span class="k">optional</span><span class="w"> </span><span class="kt">int64</span><span class="w"> </span><span class="na">timestamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span><span class="w">  </span><span class="c1">// Unix timestamp in microseconds</span>
<span class="p">}</span>

<span class="c1">// Geometry types following OGC Simple Features</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">Geometry</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kd">enum</span><span class="w"> </span><span class="n">GeometryType</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="na">POINT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="na">LINESTRING</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="na">POLYGON</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">    </span><span class="na">MULTIPOINT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">    </span><span class="na">MULTILINESTRING</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">    </span><span class="na">MULTIPOLYGON</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">    </span><span class="na">GEOMETRYCOLLECTION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="n">GeometryType</span><span class="w"> </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">  </span><span class="k">repeated</span><span class="w"> </span><span class="n">Coordinate</span><span class="w"> </span><span class="na">coordinates</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">  </span><span class="k">repeated</span><span class="w"> </span><span class="n">Geometry</span><span class="w"> </span><span class="na">children</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span><span class="w">  </span><span class="c1">// For collections</span>
<span class="w">  </span><span class="k">optional</span><span class="w"> </span><span class="n">CoordinateReferenceSystem</span><span class="w"> </span><span class="na">crs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">// Road segment with rich metadata</span>
<span class="kd">message</span><span class="w"> </span><span class="nc">RoadSegment</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">  </span><span class="n">Geometry</span><span class="w"> </span><span class="na">geometry</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>

<span class="w">  </span><span class="c1">// Traffic and routing information</span>
<span class="w">  </span><span class="kt">int32</span><span class="w"> </span><span class="na">speed_limit_kmh</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">  </span><span class="n">RoadType</span><span class="w"> </span><span class="na">road_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">  </span><span class="n">Direction</span><span class="w"> </span><span class="na">direction</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span>

<span class="w">  </span><span class="c1">// Connectivity information</span>
<span class="w">  </span><span class="k">repeated</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="na">connected_segment_ids</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span>
<span class="w">  </span><span class="k">repeated</span><span class="w"> </span><span class="n">Junction</span><span class="w"> </span><span class="na">junctions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span>

<span class="w">  </span><span class="c1">// Temporal information</span>
<span class="w">  </span><span class="kt">int64</span><span class="w"> </span><span class="na">last_updated</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">9</span><span class="p">;</span>
<span class="w">  </span><span class="kt">int64</span><span class="w"> </span><span class="na">created_at</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>

<span class="w">  </span><span class="c1">// Quality metrics</span>
<span class="w">  </span><span class="kt">float</span><span class="w"> </span><span class="na">accuracy_meters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">11</span><span class="p">;</span>
<span class="w">  </span><span class="kt">int32</span><span class="w"> </span><span class="na">confidence_score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">;</span><span class="w">  </span><span class="c1">// 0-100</span>

<span class="w">  </span><span class="c1">// Extended attributes (key-value pairs for flexibility)</span>
<span class="w">  </span><span class="n">map</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="p">&gt;</span><span class="w"> </span><span class="na">attributes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">13</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">enum</span><span class="w"> </span><span class="n">RoadType</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">UNKNOWN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">  </span><span class="na">HIGHWAY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">  </span><span class="na">ARTERIAL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">  </span><span class="na">COLLECTOR</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">  </span><span class="na">RESIDENTIAL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">  </span><span class="na">SERVICE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">  </span><span class="na">PARKING</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span>
<span class="w">  </span><span class="na">PEDESTRIAN</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="p">;</span>
<span class="w">  </span><span class="na">CYCLEWAY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">enum</span><span class="w"> </span><span class="n">Direction</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">BIDIRECTIONAL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">  </span><span class="na">FORWARD</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">  </span><span class="na">BACKWARD</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">  </span><span class="na">CLOSED</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">message</span><span class="w"> </span><span class="nc">Junction</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">string</span><span class="w"> </span><span class="na">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">  </span><span class="n">Coordinate</span><span class="w"> </span><span class="na">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">  </span><span class="n">JunctionType</span><span class="w"> </span><span class="na">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">  </span><span class="k">repeated</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="na">traffic_signals</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">enum</span><span class="w"> </span><span class="n">JunctionType</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">INTERSECTION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">  </span><span class="na">ROUNDABOUT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">  </span><span class="na">FORK</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="w">  </span><span class="na">MERGE</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">  </span><span class="na">OVERPASS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="w">  </span><span class="na">UNDERPASS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="advanced-spatial-indexing-implementation">Advanced Spatial Indexing Implementation</h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">HierarchicalSpatialIndex</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Multi-level spatial index combining multiple algorithms.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bbox_bounds</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">global_bounds</span> <span class="o">=</span> <span class="n">bbox_bounds</span>

        <span class="c1"># Level 1: Coarse grid for global partitioning</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grid_index</span> <span class="o">=</span> <span class="n">GeohashIndex</span><span class="p">(</span><span class="n">precision</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>

        <span class="c1"># Level 2: R-tree for medium-scale queries</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rtree_indices</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># Level 3: Fine-grained quadtrees for high-resolution queries</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quadtree_indices</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># Statistics for query optimization</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">query_stats</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;grid_hits&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;rtree_hits&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;quadtree_hits&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;total_queries&#39;</span><span class="p">:</span> <span class="mi">0</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">feature_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">geometry</span><span class="p">:</span> <span class="n">Geometry</span><span class="p">,</span> <span class="n">properties</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Insert feature into hierarchical index.&quot;&quot;&quot;</span>
        <span class="n">bbox</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">bounds</span>
        <span class="n">centroid</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">centroid</span>

        <span class="c1"># Level 1: Add to geohash grid</span>
        <span class="n">geohash</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid_index</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">centroid</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">centroid</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>

        <span class="c1"># Level 2: Add to appropriate R-tree</span>
        <span class="k">if</span> <span class="n">geohash</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rtree_indices</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rtree_indices</span><span class="p">[</span><span class="n">geohash</span><span class="p">]</span> <span class="o">=</span> <span class="n">rtree</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">Index</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">rtree_indices</span><span class="p">[</span><span class="n">geohash</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span>
            <span class="nb">id</span><span class="p">(</span><span class="n">feature_id</span><span class="p">),</span> <span class="n">bbox</span><span class="p">,</span> <span class="n">obj</span><span class="o">=</span><span class="p">(</span><span class="n">feature_id</span><span class="p">,</span> <span class="n">geometry</span><span class="p">,</span> <span class="n">properties</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># Level 3: Add to quadtree for complex geometries</span>
        <span class="k">if</span> <span class="n">geometry</span><span class="o">.</span><span class="n">area</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_quadtree_threshold</span><span class="p">(</span><span class="n">bbox</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">geohash</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">quadtree_indices</span><span class="p">:</span>
                <span class="n">grid_bounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid_index</span><span class="o">.</span><span class="n">decode_bbox</span><span class="p">(</span><span class="n">geohash</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">quadtree_indices</span><span class="p">[</span><span class="n">geohash</span><span class="p">]</span> <span class="o">=</span> <span class="n">QuadTree</span><span class="p">(</span><span class="n">grid_bounds</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">quadtree_indices</span><span class="p">[</span><span class="n">geohash</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">feature_id</span><span class="p">,</span> <span class="n">geometry</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">query_bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">min_x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">min_y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> 
                   <span class="n">max_x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">max_y</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Efficient bounding box query using hierarchical approach.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">query_stats</span><span class="p">[</span><span class="s1">&#39;total_queries&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># Determine optimal query strategy based on bbox size</span>
        <span class="n">bbox_area</span> <span class="o">=</span> <span class="p">(</span><span class="n">max_x</span> <span class="o">-</span> <span class="n">min_x</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">max_y</span> <span class="o">-</span> <span class="n">min_y</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">bbox_area</span> <span class="o">&gt;</span> <span class="mf">0.1</span><span class="p">:</span>  <span class="c1"># Large area - use grid index</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_large_bbox</span><span class="p">(</span><span class="n">min_x</span><span class="p">,</span> <span class="n">min_y</span><span class="p">,</span> <span class="n">max_x</span><span class="p">,</span> <span class="n">max_y</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">bbox_area</span> <span class="o">&gt;</span> <span class="mf">0.001</span><span class="p">:</span>  <span class="c1"># Medium area - use R-tree</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_medium_bbox</span><span class="p">(</span><span class="n">min_x</span><span class="p">,</span> <span class="n">min_y</span><span class="p">,</span> <span class="n">max_x</span><span class="p">,</span> <span class="n">max_y</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># Small area - use quadtree</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_query_small_bbox</span><span class="p">(</span><span class="n">min_x</span><span class="p">,</span> <span class="n">min_y</span><span class="p">,</span> <span class="n">max_x</span><span class="p">,</span> <span class="n">max_y</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_query_large_bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">min_x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">min_y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> 
                         <span class="n">max_x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">max_y</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Query large bounding boxes using grid index.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">query_stats</span><span class="p">[</span><span class="s1">&#39;grid_hits&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># Get all geohash cells that intersect the bbox</span>
        <span class="n">intersecting_geohashes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid_index</span><span class="o">.</span><span class="n">get_intersecting_cells</span><span class="p">(</span>
            <span class="n">min_x</span><span class="p">,</span> <span class="n">min_y</span><span class="p">,</span> <span class="n">max_x</span><span class="p">,</span> <span class="n">max_y</span>
        <span class="p">)</span>

        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">geohash</span> <span class="ow">in</span> <span class="n">intersecting_geohashes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">geohash</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rtree_indices</span><span class="p">:</span>
                <span class="n">rtree_results</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rtree_indices</span><span class="p">[</span><span class="n">geohash</span><span class="p">]</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span>
                    <span class="p">(</span><span class="n">min_x</span><span class="p">,</span> <span class="n">min_y</span><span class="p">,</span> <span class="n">max_x</span><span class="p">,</span> <span class="n">max_y</span><span class="p">),</span> <span class="n">objects</span><span class="o">=</span><span class="kc">True</span>
                <span class="p">))</span>
                <span class="n">results</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">r</span><span class="o">.</span><span class="n">object</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">rtree_results</span><span class="p">])</span>

        <span class="k">return</span> <span class="n">results</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_query_medium_bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">min_x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">min_y</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> 
                          <span class="n">max_x</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">max_y</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Query medium bounding boxes using R-tree.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">query_stats</span><span class="p">[</span><span class="s1">&#39;rtree_hits&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># Find relevant geohash cells</span>
        <span class="n">center_x</span><span class="p">,</span> <span class="n">center_y</span> <span class="o">=</span> <span class="p">(</span><span class="n">min_x</span> <span class="o">+</span> <span class="n">max_x</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="n">min_y</span> <span class="o">+</span> <span class="n">max_y</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="n">primary_geohash</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid_index</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">center_y</span><span class="p">,</span> <span class="n">center_x</span><span class="p">)</span>

        <span class="c1"># Get neighboring cells for edge cases</span>
        <span class="n">candidate_geohashes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid_index</span><span class="o">.</span><span class="n">get_neighbors</span><span class="p">(</span><span class="n">primary_geohash</span><span class="p">)</span>
        <span class="n">candidate_geohashes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">primary_geohash</span><span class="p">)</span>

        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">geohash</span> <span class="ow">in</span> <span class="n">candidate_geohashes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">geohash</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rtree_indices</span><span class="p">:</span>
                <span class="n">rtree_results</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rtree_indices</span><span class="p">[</span><span class="n">geohash</span><span class="p">]</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span>
                    <span class="p">(</span><span class="n">min_x</span><span class="p">,</span> <span class="n">min_y</span><span class="p">,</span> <span class="n">max_x</span><span class="p">,</span> <span class="n">max_y</span><span class="p">),</span> <span class="n">objects</span><span class="o">=</span><span class="kc">True</span>
                <span class="p">))</span>

                <span class="c1"># Perform exact geometry intersection</span>
                <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">rtree_results</span><span class="p">:</span>
                    <span class="n">feature_id</span><span class="p">,</span> <span class="n">geometry</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">object</span>
                    <span class="k">if</span> <span class="n">geometry</span><span class="o">.</span><span class="n">intersects</span><span class="p">(</span><span class="n">box</span><span class="p">(</span><span class="n">min_x</span><span class="p">,</span> <span class="n">min_y</span><span class="p">,</span> <span class="n">max_x</span><span class="p">,</span> <span class="n">max_y</span><span class="p">)):</span>
                        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">feature_id</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">results</span>

<span class="k">class</span><span class="w"> </span><span class="nc">SpatialAnalysisEngine</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Advanced spatial analysis operations.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spatial_index</span><span class="p">:</span> <span class="n">HierarchicalSpatialIndex</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">spatial_index</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">crs_transformer</span> <span class="o">=</span> <span class="n">CRSTransformer</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">buffer_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">geometry</span><span class="p">:</span> <span class="n">Geometry</span><span class="p">,</span> <span class="n">distance_meters</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
                       <span class="n">target_crs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3857</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Geometry</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Perform accurate buffer analysis in projected coordinates.&quot;&quot;&quot;</span>
        <span class="c1"># Transform to appropriate projected CRS for accurate distance calculation</span>
        <span class="k">if</span> <span class="n">geometry</span><span class="o">.</span><span class="n">crs</span> <span class="o">!=</span> <span class="n">target_crs</span><span class="p">:</span>
            <span class="n">transformed_geom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crs_transformer</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span>
                <span class="n">geometry</span><span class="p">,</span> <span class="n">source_crs</span><span class="o">=</span><span class="n">geometry</span><span class="o">.</span><span class="n">crs</span><span class="p">,</span> <span class="n">target_crs</span><span class="o">=</span><span class="n">target_crs</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">transformed_geom</span> <span class="o">=</span> <span class="n">geometry</span>

        <span class="c1"># Perform buffer operation</span>
        <span class="n">buffered</span> <span class="o">=</span> <span class="n">transformed_geom</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">distance_meters</span><span class="p">)</span>

        <span class="c1"># Transform back to original CRS if needed</span>
        <span class="k">if</span> <span class="n">geometry</span><span class="o">.</span><span class="n">crs</span> <span class="o">!=</span> <span class="n">target_crs</span><span class="p">:</span>
            <span class="n">buffered</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">crs_transformer</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span>
                <span class="n">buffered</span><span class="p">,</span> <span class="n">source_crs</span><span class="o">=</span><span class="n">target_crs</span><span class="p">,</span> <span class="n">target_crs</span><span class="o">=</span><span class="n">geometry</span><span class="o">.</span><span class="n">crs</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">buffered</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">network_analysis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">road_segments</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">RoadSegment</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">NetworkGraph</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Build routable network graph from road segments.&quot;&quot;&quot;</span>
        <span class="n">graph</span> <span class="o">=</span> <span class="n">NetworkGraph</span><span class="p">()</span>

        <span class="c1"># Build topology</span>
        <span class="k">for</span> <span class="n">segment</span> <span class="ow">in</span> <span class="n">road_segments</span><span class="p">:</span>
            <span class="n">start_coord</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">end_coord</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

            <span class="n">start_node</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">start_coord</span><span class="p">)</span>
            <span class="n">end_node</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">end_coord</span><span class="p">)</span>

            <span class="c1"># Calculate edge weight (travel time)</span>
            <span class="n">length_meters</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_length</span><span class="p">(</span><span class="n">segment</span><span class="o">.</span><span class="n">geometry</span><span class="p">)</span>
            <span class="n">speed_ms</span> <span class="o">=</span> <span class="n">segment</span><span class="o">.</span><span class="n">speed_limit_kmh</span> <span class="o">/</span> <span class="mf">3.6</span>  <span class="c1"># Convert to m/s</span>
            <span class="n">travel_time</span> <span class="o">=</span> <span class="n">length_meters</span> <span class="o">/</span> <span class="n">speed_ms</span>

            <span class="c1"># Add edge with directionality</span>
            <span class="k">if</span> <span class="n">segment</span><span class="o">.</span><span class="n">direction</span> <span class="ow">in</span> <span class="p">[</span><span class="n">Direction</span><span class="o">.</span><span class="n">BIDIRECTIONAL</span><span class="p">,</span> <span class="n">Direction</span><span class="o">.</span><span class="n">FORWARD</span><span class="p">]:</span>
                <span class="n">graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">start_node</span><span class="p">,</span> <span class="n">end_node</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="n">travel_time</span><span class="p">,</span> <span class="n">segment</span><span class="o">=</span><span class="n">segment</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">segment</span><span class="o">.</span><span class="n">direction</span> <span class="ow">in</span> <span class="p">[</span><span class="n">Direction</span><span class="o">.</span><span class="n">BIDIRECTIONAL</span><span class="p">,</span> <span class="n">Direction</span><span class="o">.</span><span class="n">BACKWARD</span><span class="p">]:</span>
                <span class="n">graph</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">end_node</span><span class="p">,</span> <span class="n">start_node</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="n">travel_time</span><span class="p">,</span> <span class="n">segment</span><span class="o">=</span><span class="n">segment</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">graph</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">change_detection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">old_features</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Feature</span><span class="p">],</span> 
                        <span class="n">new_features</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Feature</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">ChangeSet</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Detect changes between two feature sets.&quot;&quot;&quot;</span>
        <span class="n">changes</span> <span class="o">=</span> <span class="n">ChangeSet</span><span class="p">()</span>

        <span class="c1"># Build spatial indices for both datasets</span>
        <span class="n">old_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_spatial_index</span><span class="p">(</span><span class="n">old_features</span><span class="p">)</span>
        <span class="n">new_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_spatial_index</span><span class="p">(</span><span class="n">new_features</span><span class="p">)</span>

        <span class="c1"># Detect additions</span>
        <span class="k">for</span> <span class="n">new_feature</span> <span class="ow">in</span> <span class="n">new_features</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_matching_feature</span><span class="p">(</span><span class="n">new_feature</span><span class="p">,</span> <span class="n">old_index</span><span class="p">):</span>
                <span class="n">changes</span><span class="o">.</span><span class="n">additions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_feature</span><span class="p">)</span>

        <span class="c1"># Detect deletions and modifications</span>
        <span class="k">for</span> <span class="n">old_feature</span> <span class="ow">in</span> <span class="n">old_features</span><span class="p">:</span>
            <span class="n">matching_feature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_matching_feature</span><span class="p">(</span><span class="n">old_feature</span><span class="p">,</span> <span class="n">new_index</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">matching_feature</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">changes</span><span class="o">.</span><span class="n">deletions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">old_feature</span><span class="p">)</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_features_equal</span><span class="p">(</span><span class="n">old_feature</span><span class="p">,</span> <span class="n">matching_feature</span><span class="p">):</span>
                <span class="n">changes</span><span class="o">.</span><span class="n">modifications</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">old_feature</span><span class="p">,</span> <span class="n">matching_feature</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">changes</span>
</code></pre></div>
<h3 id="performance-optimization-patterns">Performance Optimization Patterns</h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">GeospatialMemoryOptimizer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Memory optimization for large-scale geospatial processing.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">memory_limit_gb</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">4.0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">memory_limit_bytes</span> <span class="o">=</span> <span class="n">memory_limit_gb</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_memory_usage</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">geometry_cache</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compression_enabled</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">process_large_dataset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dataset_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> 
                            <span class="n">processing_func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">,</span>
                            <span class="n">chunk_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Process large datasets in memory-efficient chunks.&quot;&quot;&quot;</span>

        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_open_dataset</span><span class="p">(</span><span class="n">dataset_path</span><span class="p">)</span> <span class="k">as</span> <span class="n">dataset</span><span class="p">:</span>
            <span class="n">total_features</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">chunk_start</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">total_features</span><span class="p">,</span> <span class="n">chunk_size</span><span class="p">):</span>
                <span class="n">chunk_end</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">chunk_start</span> <span class="o">+</span> <span class="n">chunk_size</span><span class="p">,</span> <span class="n">total_features</span><span class="p">)</span>

                <span class="c1"># Load chunk into memory</span>
                <span class="n">chunk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_chunk</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">chunk_start</span><span class="p">,</span> <span class="n">chunk_end</span><span class="p">)</span>

                <span class="c1"># Monitor memory usage</span>
                <span class="n">chunk_memory</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">getsizeof</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_memory_usage</span> <span class="o">+</span> <span class="n">chunk_memory</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">memory_limit_bytes</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_cleanup_cache</span><span class="p">()</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">current_memory_usage</span> <span class="o">+=</span> <span class="n">chunk_memory</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># Process chunk</span>
                    <span class="n">results</span> <span class="o">=</span> <span class="n">processing_func</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
                    <span class="k">yield</span> <span class="n">results</span>

                <span class="k">finally</span><span class="p">:</span>
                    <span class="c1"># Clean up chunk memory</span>
                    <span class="k">del</span> <span class="n">chunk</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">current_memory_usage</span> <span class="o">-=</span> <span class="n">chunk_memory</span>
                    <span class="n">gc</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">optimize_geometry_storage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">geometries</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Geometry</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">bytes</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Compress geometries for efficient storage.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">compression_enabled</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">geom</span><span class="o">.</span><span class="n">wkb</span> <span class="k">for</span> <span class="n">geom</span> <span class="ow">in</span> <span class="n">geometries</span><span class="p">]</span>

        <span class="n">optimized_geometries</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">geom</span> <span class="ow">in</span> <span class="n">geometries</span><span class="p">:</span>
            <span class="c1"># Simplify geometry based on scale</span>
            <span class="n">simplified</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_adaptive_simplification</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span>

            <span class="c1"># Compress using Protocol Buffers</span>
            <span class="n">pb_geom</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_protobuf</span><span class="p">(</span><span class="n">simplified</span><span class="p">)</span>
            <span class="n">compressed</span> <span class="o">=</span> <span class="n">gzip</span><span class="o">.</span><span class="n">compress</span><span class="p">(</span><span class="n">pb_geom</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">())</span>

            <span class="n">optimized_geometries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">compressed</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">optimized_geometries</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_adaptive_simplification</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">geometry</span><span class="p">:</span> <span class="n">Geometry</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Geometry</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Simplify geometry based on its characteristics.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">geometry</span><span class="o">.</span><span class="n">geom_type</span> <span class="o">==</span> <span class="s1">&#39;Point&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">geometry</span>  <span class="c1"># Points can&#39;t be simplified</span>

        <span class="c1"># Calculate appropriate tolerance based on geometry bounds</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">bounds</span>
        <span class="n">diagonal</span> <span class="o">=</span> <span class="p">((</span><span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mf">0.5</span>
        <span class="n">tolerance</span> <span class="o">=</span> <span class="n">diagonal</span> <span class="o">*</span> <span class="mf">0.001</span>  <span class="c1"># 0.1% of diagonal</span>

        <span class="c1"># Apply Douglas-Peucker simplification</span>
        <span class="n">simplified</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">simplify</span><span class="p">(</span><span class="n">tolerance</span><span class="p">,</span> <span class="n">preserve_topology</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Ensure simplified geometry is valid</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">simplified</span><span class="o">.</span><span class="n">is_valid</span><span class="p">:</span>
            <span class="n">simplified</span> <span class="o">=</span> <span class="n">simplified</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># Fix self-intersections</span>

        <span class="k">return</span> <span class="n">simplified</span>

<span class="k">class</span><span class="w"> </span><span class="nc">StreamingGeospatialProcessor</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Stream processing for real-time geospatial data.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">processors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">output_streams</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;features_processed&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;processing_errors&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s1">&#39;average_latency_ms&#39;</span><span class="p">:</span> <span class="mi">0</span>
        <span class="p">}</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">process_stream</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_stream</span><span class="p">:</span> <span class="n">AsyncIterator</span><span class="p">[</span><span class="n">Feature</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Process streaming geospatial data.&quot;&quot;&quot;</span>
        <span class="k">async</span> <span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="n">input_stream</span><span class="p">:</span>
            <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Apply processing pipeline</span>
                <span class="n">processed_feature</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_apply_processors</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>

                <span class="c1"># Send to output streams</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">_send_to_outputs</span><span class="p">(</span><span class="n">processed_feature</span><span class="p">)</span>

                <span class="c1"># Update metrics</span>
                <span class="n">processing_time</span> <span class="o">=</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1000</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_update_metrics</span><span class="p">(</span><span class="n">processing_time</span><span class="p">)</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">metrics</span><span class="p">[</span><span class="s1">&#39;processing_errors&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error processing feature </span><span class="si">{</span><span class="n">feature</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">add_processor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">processor</span><span class="p">:</span> <span class="s1">&#39;StreamProcessor&#39;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a processing step to the pipeline.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">processors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">processor</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_apply_processors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">feature</span><span class="p">:</span> <span class="n">Feature</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Feature</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply all processors in sequence.&quot;&quot;&quot;</span>
        <span class="n">current_feature</span> <span class="o">=</span> <span class="n">feature</span>

        <span class="k">for</span> <span class="n">processor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">processors</span><span class="p">:</span>
            <span class="n">current_feature</span> <span class="o">=</span> <span class="k">await</span> <span class="n">processor</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">current_feature</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">current_feature</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">break</span>  <span class="c1"># Processor filtered out the feature</span>

        <span class="k">return</span> <span class="n">current_feature</span>

<span class="k">class</span><span class="w"> </span><span class="nc">GeospatialETLPipeline</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ETL pipeline for geospatial data integration.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extractors</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">transformers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loaders</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_quality_rules</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">extract_from_source</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">source_config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Feature</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Extract data from various geospatial sources.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">source_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">extractors</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown source type: </span><span class="si">{</span><span class="n">source_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">extractor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extractors</span><span class="p">[</span><span class="n">source_type</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">extractor</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="n">source_config</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">transform_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">features</span><span class="p">:</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Feature</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Feature</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Apply transformation pipeline to features.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="n">features</span><span class="p">:</span>
            <span class="n">transformed_feature</span> <span class="o">=</span> <span class="n">feature</span>

            <span class="c1"># Apply transformations in sequence</span>
            <span class="k">for</span> <span class="n">transformer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">transformers</span><span class="p">:</span>
                <span class="n">transformed_feature</span> <span class="o">=</span> <span class="n">transformer</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">transformed_feature</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">transformed_feature</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">break</span>  <span class="c1"># Feature was filtered out</span>

            <span class="c1"># Apply data quality rules</span>
            <span class="k">if</span> <span class="n">transformed_feature</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_validate_quality</span><span class="p">(</span><span class="n">transformed_feature</span><span class="p">):</span>
                <span class="k">yield</span> <span class="n">transformed_feature</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_to_destination</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">features</span><span class="p">:</span> <span class="n">Iterator</span><span class="p">[</span><span class="n">Feature</span><span class="p">],</span> 
                           <span class="n">destination_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">destination_config</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load transformed features to destination.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">destination_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">loaders</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown destination type: </span><span class="si">{</span><span class="n">destination_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">loader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">loaders</span><span class="p">[</span><span class="n">destination_type</span><span class="p">]</span>
        <span class="n">loader</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">features</span><span class="p">,</span> <span class="n">destination_config</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_validate_quality</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">feature</span><span class="p">:</span> <span class="n">Feature</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate feature against data quality rules.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">rule</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">data_quality_rules</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">rule</span><span class="o">.</span><span class="n">validate</span><span class="p">(</span><span class="n">feature</span><span class="p">):</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Feature </span><span class="si">{</span><span class="n">feature</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2"> failed quality rule: </span><span class="si">{</span><span class="n">rule</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">False</span>

        <span class="k">return</span> <span class="kc">True</span>
</code></pre></div>
<h2 id="performance-benchmarking-framework">Performance Benchmarking Framework</h2>
<h3 id="serialization-performance-analysis">Serialization Performance Analysis</h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SerializationBenchmark</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Benchmark different serialization formats for geospatial data.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">test_datasets</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;points_1k&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_points</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span>
            <span class="s1">&#39;points_100k&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_points</span><span class="p">(</span><span class="mi">100000</span><span class="p">),</span>
            <span class="s1">&#39;roads_sf&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_sf_roads</span><span class="p">(),</span>
            <span class="s1">&#39;complex_polygons&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_complex_polygons</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">run_benchmark</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Run comprehensive serialization benchmark.&quot;&quot;&quot;</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">dataset_name</span><span class="p">,</span> <span class="n">features</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">test_datasets</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">results</span><span class="p">[</span><span class="n">dataset_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;geojson&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_benchmark_geojson</span><span class="p">(</span><span class="n">features</span><span class="p">),</span>
                <span class="s1">&#39;protobuf&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_benchmark_protobuf</span><span class="p">(</span><span class="n">features</span><span class="p">),</span>
                <span class="s1">&#39;wkb&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_benchmark_wkb</span><span class="p">(</span><span class="n">features</span><span class="p">),</span>
                <span class="s1">&#39;flatbuffers&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_benchmark_flatbuffers</span><span class="p">(</span><span class="n">features</span><span class="p">)</span>
            <span class="p">}</span>

        <span class="k">return</span> <span class="n">results</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_benchmark_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">features</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Feature</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Benchmark GeoJSON serialization.&quot;&quot;&quot;</span>
        <span class="c1"># Serialize</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">serialized</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;FeatureCollection&#39;</span><span class="p">,</span>
            <span class="s1">&#39;features&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">f</span><span class="o">.</span><span class="n">__geo_interface__</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">features</span><span class="p">]</span>
        <span class="p">})</span>
        <span class="n">serialize_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>

        <span class="c1"># Deserialize</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">serialized</span><span class="p">)</span>
        <span class="n">features_loaded</span> <span class="o">=</span> <span class="p">[</span><span class="n">Feature</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;features&#39;</span><span class="p">]]</span>
        <span class="n">deserialize_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;serialize_time&#39;</span><span class="p">:</span> <span class="n">serialize_time</span><span class="p">,</span>
            <span class="s1">&#39;deserialize_time&#39;</span><span class="p">:</span> <span class="n">deserialize_time</span><span class="p">,</span>
            <span class="s1">&#39;size_bytes&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">serialized</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)),</span>
            <span class="s1">&#39;features_count&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">features_loaded</span><span class="p">)</span>
        <span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_benchmark_protobuf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">features</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Feature</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Benchmark Protocol Buffers serialization.&quot;&quot;&quot;</span>
        <span class="c1"># Convert to protobuf</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">pb_features</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="n">features</span><span class="p">:</span>
            <span class="n">pb_feature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_to_protobuf_feature</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>
            <span class="n">pb_features</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pb_feature</span><span class="p">)</span>

        <span class="c1"># Serialize collection</span>
        <span class="n">collection</span> <span class="o">=</span> <span class="n">FeatureCollection</span><span class="p">()</span>
        <span class="n">collection</span><span class="o">.</span><span class="n">features</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">pb_features</span><span class="p">)</span>
        <span class="n">serialized</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">SerializeToString</span><span class="p">()</span>
        <span class="n">serialize_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>

        <span class="c1"># Deserialize</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">loaded_collection</span> <span class="o">=</span> <span class="n">FeatureCollection</span><span class="p">()</span>
        <span class="n">loaded_collection</span><span class="o">.</span><span class="n">ParseFromString</span><span class="p">(</span><span class="n">serialized</span><span class="p">)</span>
        <span class="n">features_loaded</span> <span class="o">=</span> <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_from_protobuf_feature</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">loaded_collection</span><span class="o">.</span><span class="n">features</span>
        <span class="p">]</span>
        <span class="n">deserialize_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;serialize_time&#39;</span><span class="p">:</span> <span class="n">serialize_time</span><span class="p">,</span>
            <span class="s1">&#39;deserialize_time&#39;</span><span class="p">:</span> <span class="n">deserialize_time</span><span class="p">,</span>
            <span class="s1">&#39;size_bytes&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">serialized</span><span class="p">),</span>
            <span class="s1">&#39;features_count&#39;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">features_loaded</span><span class="p">)</span>
        <span class="p">}</span>

<span class="k">class</span><span class="w"> </span><span class="nc">SpatialIndexBenchmark</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Benchmark spatial index performance.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">test_data_sizes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1000</span><span class="p">,</span> <span class="mi">10000</span><span class="p">,</span> <span class="mi">100000</span><span class="p">,</span> <span class="mi">1000000</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">query_sizes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">(</span><span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">),</span>  <span class="c1"># Small area</span>
            <span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">),</span>    <span class="c1"># Medium area  </span>
            <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span>      <span class="c1"># Large area</span>
        <span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">benchmark_index_types</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Compare different spatial index implementations.&quot;&quot;&quot;</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">data_size</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">test_data_sizes</span><span class="p">:</span>
            <span class="n">test_features</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_test_features</span><span class="p">(</span><span class="n">data_size</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">index_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;rtree&#39;</span><span class="p">,</span> <span class="s1">&#39;quadtree&#39;</span><span class="p">,</span> <span class="s1">&#39;geohash&#39;</span><span class="p">,</span> <span class="s1">&#39;h3&#39;</span><span class="p">]:</span>
                <span class="c1"># Build index</span>
                <span class="n">build_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
                <span class="n">index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_build_index</span><span class="p">(</span><span class="n">index_type</span><span class="p">,</span> <span class="n">test_features</span><span class="p">)</span>
                <span class="n">build_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">build_start</span>

                <span class="c1"># Test queries</span>
                <span class="k">for</span> <span class="n">query_width</span><span class="p">,</span> <span class="n">query_height</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_sizes</span><span class="p">:</span>
                    <span class="n">query_times</span> <span class="o">=</span> <span class="p">[]</span>

                    <span class="c1"># Run multiple queries for statistical significance</span>
                    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">100</span><span class="p">):</span>
                        <span class="n">bbox</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_generate_random_bbox</span><span class="p">(</span><span class="n">query_width</span><span class="p">,</span> <span class="n">query_height</span><span class="p">)</span>

                        <span class="n">query_start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
                        <span class="n">results_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">index</span><span class="o">.</span><span class="n">query_bbox</span><span class="p">(</span><span class="o">*</span><span class="n">bbox</span><span class="p">)))</span>
                        <span class="n">query_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">query_start</span>

                        <span class="n">query_times</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">query_time</span><span class="p">)</span>

                    <span class="n">avg_query_time</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">query_times</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">query_times</span><span class="p">)</span>

                    <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
                        <span class="s1">&#39;data_size&#39;</span><span class="p">:</span> <span class="n">data_size</span><span class="p">,</span>
                        <span class="s1">&#39;index_type&#39;</span><span class="p">:</span> <span class="n">index_type</span><span class="p">,</span>
                        <span class="s1">&#39;query_area&#39;</span><span class="p">:</span> <span class="n">query_width</span> <span class="o">*</span> <span class="n">query_height</span><span class="p">,</span>
                        <span class="s1">&#39;build_time&#39;</span><span class="p">:</span> <span class="n">build_time</span><span class="p">,</span>
                        <span class="s1">&#39;avg_query_time_ms&#39;</span><span class="p">:</span> <span class="n">avg_query_time</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span>
                        <span class="s1">&#39;memory_mb&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_estimate_memory_usage</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
                    <span class="p">})</span>

        <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
</code></pre></div>
<h2 id="real-world-integration-examples">Real-World Integration Examples</h2>
<h3 id="postgis-integration-with-streaming">PostGIS Integration with Streaming</h3>
<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">PostGISStreamingProcessor</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;High-performance PostGIS integration with streaming support.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">connection_pool</span><span class="p">:</span> <span class="n">asyncpg</span><span class="o">.</span><span class="n">Pool</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span> <span class="o">=</span> <span class="n">connection_pool</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prepared_statements</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">stream_large_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">parameters</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                                <span class="n">chunk_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncIterator</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stream large spatial query results to avoid memory issues.&quot;&quot;&quot;</span>

        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
            <span class="c1"># Use server-side cursor for large datasets</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">connection</span><span class="o">.</span><span class="n">transaction</span><span class="p">():</span>
                <span class="k">await</span> <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;DECLARE large_cursor CURSOR FOR </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> 
                                       <span class="o">*</span><span class="p">(</span><span class="n">parameters</span> <span class="ow">or</span> <span class="p">[]))</span>

                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="n">rows</span> <span class="o">=</span> <span class="k">await</span> <span class="n">connection</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;FETCH </span><span class="si">{</span><span class="n">chunk_size</span><span class="si">}</span><span class="s2"> FROM large_cursor&quot;</span>
                    <span class="p">)</span>

                    <span class="k">if</span> <span class="ow">not</span> <span class="n">rows</span><span class="p">:</span>
                        <span class="k">break</span>

                    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
                        <span class="c1"># Convert PostGIS binary to geometry</span>
                        <span class="n">geom_wkb</span> <span class="o">=</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">]</span>
                        <span class="n">geometry</span> <span class="o">=</span> <span class="n">wkb</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="nb">bytes</span><span class="p">(</span><span class="n">geom_wkb</span><span class="p">))</span>

                        <span class="k">yield</span> <span class="p">{</span>
                            <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
                            <span class="s1">&#39;geometry&#39;</span><span class="p">:</span> <span class="n">geometry</span><span class="p">,</span>
                            <span class="s1">&#39;properties&#39;</span><span class="p">:</span> <span class="nb">dict</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">_mapping</span><span class="p">)</span>
                        <span class="p">}</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">bulk_insert_optimized</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">features</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Feature</span><span class="p">],</span> 
                                   <span class="n">table_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Optimized bulk insert using COPY and prepared statements.&quot;&quot;&quot;</span>

        <span class="c1"># Prepare data for COPY</span>
        <span class="n">copy_data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="n">features</span><span class="p">:</span>
            <span class="n">geometry_wkt</span> <span class="o">=</span> <span class="n">feature</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">wkt</span>
            <span class="n">properties_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">feature</span><span class="o">.</span><span class="n">properties</span><span class="p">)</span>

            <span class="n">copy_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">feature</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="n">geometry_wkt</span><span class="si">}</span><span class="se">\t</span><span class="si">{</span><span class="n">properties_json</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">copy_text</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">copy_data</span><span class="p">)</span>

        <span class="k">async</span> <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
            <span class="c1"># Use COPY for maximum performance</span>
            <span class="k">await</span> <span class="n">connection</span><span class="o">.</span><span class="n">copy_to_table</span><span class="p">(</span>
                <span class="n">table_name</span><span class="p">,</span>
                <span class="n">source</span><span class="o">=</span><span class="n">copy_text</span><span class="p">,</span>
                <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;geometry&#39;</span><span class="p">,</span> <span class="s1">&#39;properties&#39;</span><span class="p">],</span>
                <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;text&#39;</span>
            <span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CloudStorageGeospatialProcessor</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Process geospatial data from cloud storage efficiently.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">storage_client</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">storage</span> <span class="o">=</span> <span class="n">storage_client</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">processing_cache</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">process_cog_tiles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bucket</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
                               <span class="n">processing_func</span><span class="p">:</span> <span class="n">Callable</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">ProcessingResult</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Process Cloud Optimized GeoTIFF tiles efficiently.&quot;&quot;&quot;</span>

        <span class="c1"># List all COG files in prefix</span>
        <span class="n">objects</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">storage</span><span class="o">.</span><span class="n">list_objects</span><span class="p">(</span><span class="n">bucket</span><span class="p">,</span> <span class="n">prefix</span><span class="p">)</span>
        <span class="n">cog_files</span> <span class="o">=</span> <span class="p">[</span><span class="n">obj</span> <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objects</span> <span class="k">if</span> <span class="n">obj</span><span class="o">.</span><span class="n">key</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.tif&#39;</span><span class="p">)]</span>

        <span class="c1"># Process files in parallel with concurrency control</span>
        <span class="n">semaphore</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">Semaphore</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>  <span class="c1"># Limit concurrent downloads</span>

        <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">process_single_cog</span><span class="p">(</span><span class="n">cog_object</span><span class="p">):</span>
            <span class="k">async</span> <span class="k">with</span> <span class="n">semaphore</span><span class="p">:</span>
                <span class="c1"># Stream COG data without full download</span>
                <span class="k">with</span> <span class="n">rasterio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;/vsis3/</span><span class="si">{</span><span class="n">bucket</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">cog_object</span><span class="o">.</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">dataset</span><span class="p">:</span>
                    <span class="c1"># Read specific bands/windows as needed</span>
                    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">processing_func</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
                    <span class="k">return</span> <span class="n">ProcessingResult</span><span class="p">(</span><span class="n">cog_object</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span>

        <span class="n">tasks</span> <span class="o">=</span> <span class="p">[</span><span class="n">process_single_cog</span><span class="p">(</span><span class="n">cog</span><span class="p">)</span> <span class="k">for</span> <span class="n">cog</span> <span class="ow">in</span> <span class="n">cog_files</span><span class="p">]</span>
        <span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span><span class="o">*</span><span class="n">tasks</span><span class="p">,</span> <span class="n">return_exceptions</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># Filter out exceptions and return successful results</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">r</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">results</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">ProcessingResult</span><span class="p">)]</span>
</code></pre></div>
<h2 id="professional-development-exercises">Professional Development Exercises</h2>
<h3 id="exercise-1-build-a-multi-format-data-converter">Exercise 1: Build a Multi-Format Data Converter</h3>
<p>Create a comprehensive geospatial data conversion pipeline:
- Support input formats: Shapefile, GeoJSON, KML, GPX, PostGIS
- Support output formats: Protocol Buffers, FlatBuffers, Parquet, COG
- Implement coordinate system transformations
- Add data validation and quality checks
- Include performance benchmarking and optimization</p>
<h3 id="exercise-2-implement-advanced-spatial-operations">Exercise 2: Implement Advanced Spatial Operations</h3>
<p>Build a spatial analysis engine with:
- Buffer analysis with accurate distance calculations
- Spatial joins with multiple join predicates
- Network analysis for routing and accessibility
- Voronoi diagrams and Delaunay triangulation
- Spatial clustering algorithms (DBSCAN, K-means)</p>
<h3 id="exercise-3-create-a-real-time-geospatial-stream-processor">Exercise 3: Create a Real-Time Geospatial Stream Processor</h3>
<p>Design a streaming system that:
- Ingests real-time location data (GPS tracks, IoT sensors)
- Performs real-time geofencing and proximity detection
- Implements sliding window analytics
- Handles late-arriving and out-of-order data
- Provides exactly-once processing guarantees</p>
<h3 id="exercise-4-build-a-distributed-spatial-index">Exercise 4: Build a Distributed Spatial Index</h3>
<p>Implement a distributed spatial indexing system:
- Partition spatial data across multiple nodes
- Implement consistent hashing for spatial keys
- Add replication and fault tolerance
- Support distributed spatial queries
- Include monitoring and auto-scaling capabilities</p>
<h2 id="industry-context-and-applications">Industry Context and Applications</h2>
<h3 id="production-mapping-services">Production Mapping Services</h3>
<ul>
<li><strong>Google Maps</strong>: Distributed spatial indexing with S2 geometry</li>
<li><strong>OpenStreetMap</strong>: PostgreSQL/PostGIS with custom tile generation</li>
<li><strong>Mapbox</strong>: Vector tiles with real-time style processing</li>
<li><strong>HERE Technologies</strong>: High-definition mapping with sensor fusion</li>
</ul>
<h3 id="location-intelligence-platforms">Location Intelligence Platforms</h3>
<ul>
<li><strong>Uber's H3</strong>: Hexagonal hierarchical spatial indexing for analytics</li>
<li><strong>Foursquare's Pilgrim</strong>: Real-time location intelligence SDK</li>
<li><strong>SafeGraph</strong>: POI data processing with privacy preservation</li>
<li><strong>Carto</strong>: Cloud-native spatial analytics platform</li>
</ul>
<h3 id="autonomous-vehicle-systems">Autonomous Vehicle Systems</h3>
<ul>
<li><strong>Tesla's Neural Networks</strong>: Real-time spatial processing for perception</li>
<li><strong>Waymo's HD Maps</strong>: Centimeter-accurate spatial data processing</li>
<li><strong>nuTonomy's CityOS</strong>: Urban mobility spatial analytics</li>
<li><strong>Mobileye's REM</strong>: Crowdsourced HD mapping</li>
</ul>
<h2 id="resources">Resources</h2>
<h3 id="technical-standards-and-specifications">Technical Standards and Specifications</h3>
<ul>
<li><a href="https://www.ogc.org/standards/sfa">OGC Simple Features Specification</a></li>
<li><a href="https://developers.google.com/protocol-buffers">Protocol Buffers Language Guide</a></li>
<li><a href="https://www.cogeo.org/">Cloud Optimized GeoTIFF</a></li>
<li><a href="https://docs.mapbox.com/vector-tiles/specification/">Mapbox Vector Tile Specification</a></li>
</ul>
<h3 id="spatial-algorithms-and-data-structures">Spatial Algorithms and Data Structures</h3>
<ul>
<li><a href="https://www.amazon.com/Computational-Geometry-Applications-Mark-Berg/dp/3540779736">Computational Geometry: Algorithms and Applications</a></li>
<li><a href="https://www.amazon.com/Spatial-Databases-Shashi-Shekhar/dp/0136859674">Spatial Databases: A Tour by Shashi Shekhar</a></li>
<li><a href="https://dl.acm.org/doi/book/10.5555/549784">R-Trees: Theory and Applications</a></li>
</ul>
<h3 id="performance-optimization">Performance Optimization</h3>
<ul>
<li><a href="https://www.oreilly.com/library/view/high-performance-python/9781449361747/">High Performance Python by Micha Gorelick</a></li>
<li><a href="https://gdal.org/tutorials/raster_api_tut.html">GDAL/OGR Performance Tips</a></li>
<li><a href="https://postgis.net/workshops/postgis-intro/performance.html">PostGIS Performance Tuning</a></li>
</ul>
<h3 id="industry-applications">Industry Applications</h3>
<ul>
<li><a href="https://eng.uber.com/h3/">Uber's Engineering Blog on H3</a></li>
<li><a href="http://s2geometry.io/">Google's S2 Geometry Library</a></li>
<li><a href="https://docs.mapbox.com/help/how-mapbox-works/web-maps/">Mapbox's Guide to Vector Tiles</a></li>
</ul>
<p>This module provides the foundation for understanding how advanced data processing techniques enable scalable, high-performance geospatial systems that can handle the complexity and scale requirements of modern location-based applications.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.sections", "toc.follow", "search.suggest", "content.code.copy"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.50899def.min.js"></script>
      
        <script src="../javascripts/config.js"></script>
      
    
  </body>
</html>